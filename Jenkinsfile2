pipeline {
    agent any
    stages {
        stage('clone') {
            steps {
            git credentialsId: '1a890ea9-a7a0-4dc6-b0d1-a86d441f8a67', url: 'https://github.com/naveen-goli/net.git'
        }
        }
   
         stage('Build + SonarQube analysis') {
         steps {
                script {
    def sonarHome = tool 'sonarMSbuild'
     def mshome = tool 'MsBuildLocal'
    withSonarQubeEnv('SonarQube_test') {
      bat "${sonarHome}\\SonarQube.Scanner.MSBuild.exe begin /k:myKey"
      bat(/"${mshome}\msbuild.exe" WebApplication1.sln \/t:rebuild/)
      bat "${sonarHome}\\SonarQube.Scanner.MSBuild.exe end"
    }
  }
    }
    }
    }
    
}
